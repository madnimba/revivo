-----------app.js
const express=require('express');
const app=express();
const body_parser=require('body-parser');
const morgan=require('morgan');
const cookieParser = require('cookie-parser');


//constant routers
const indexRouter=require('./routers/indexRouters');


//setting the view engine
app.set('view engine','set');
app.use(express.static('public'))


//middleware
app.use(body_parser.urlencoded({ extended: true }));
app.use(body_parser.json());
app.use(morgan('tiny'));
app.use(cookieParser());
app.use('/app',indexRouter);




module.exports = app;


<!--shop view of seeing all products of a shop-->
<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, intial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title> Products</title>

      <!-- Font Awesome -->
<link
href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
rel="stylesheet"
/>
<!-- Google Fonts -->
<link
href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"
rel="stylesheet"
/>
<!-- MDB -->
<link
href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/6.4.1/mdb.min.css"
rel="stylesheet"
/>

  <!-- Site Icon -->
  <link rel="shortcut Icon" type="image/png" href="img/favicon.png">

  <!-- Font Awesome Icons -->
  <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Kanit&display=swap" rel="stylesheet">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.11.0/mdb.min.css">

  <!-- Custom CSS -->
  <link href="/style.css" rel="stylesheet">

</head>
<body id="page-top">
  <%- include('userNav.ejs') %>
  

  <header class="page-section masthead2">
    <div class="container h-50">
      <h1 class="section-header text-white font-weight-bold">Products</h1>
      <p class="main-menu text-white-75 font-weight-light mb-5"><a class="link-menu" href="home.html">Revivo > <span style="color:white;">Products</span></a></p>
      
    </div>
    
  </header>

  <section class="page-section">
    <div class="container">
      <div class="row">

        <div class="col-lg-3 blog-form">
          <hr />
          <div>&nbsp;</div>

          <h2 class="blog-sidebar-title"><b>Categories</b></h2>
          <div>&nbsp;</div>
          <hr />

          <p class="blog-sidebar-list"><b><span class="list-icon">  </span> <a href="/app/showAllProducts/men">Men</a></b></p>
          <p class="blog-sidebar-list"><b><span class="list-icon">  </span> <a href="/app/showAllProducts/women">Women</a></b></p>
          <p class="blog-sidebar-list"><b><span class="list-icon">  </span><a href="/app/showAllProducts/children"> Children</a></b></p>
          

          <div>&nbsp;</div>
          <div>&nbsp;</div>

          <h2 class="blog-sidebar-title"><b>Filter by price</b></h2>
          <hr />

          <div class="input-group mb-3">
            <input type="text" class="form-control" placeholder="Search" aria-label="Receipient's username" aria-describely="basic-addon2">
            <div class="input-group-append">
              <span class="input-group-text" id="basic-addon2"><i class="fa fa-search"></i></span>
            </div>
            
          </div>
          <div>&nbsp;</div>
          <button type="button" class="btn btn-dark btn-lg">Filter</button>
          

          <div>&nbsp;</div>
          <div>&nbsp;</div>
          <h2 class="blog-sidebar-title"><b></b></h2>
          <p class="product-sidebar-list"><b></b></p>
          <p class="product-sidebar-list"><b></b></p>
          <p class="product-sidebar-list"><b></b></p>


        </div>
        <!--END  <div class="col-lg-3 blog-form">-->

				<div class="col-lg-9" style="padding-left: 30px;">
					<div class="row">
						<div class="col">
							Showing all <%= products.length %> results
						</div>

						<div class="col">
							<select class="form-control">
								<option value="">Default Sorting</option>
								<option value="popularity">Sorting by popularity</option>
								<option value="average">Sorting by average</option>
								<option value="latest">Sorting by latest</option>
								<option value="low">Sorting by low</option>
								<option value="high">Sorting by high</option>
							</select>
						</div>

						<div class="col">
						</div>

					</div>
					<!-- Sorting by <div class="row"> -->
					<div>&nbsp;</div>
					<div>&nbsp;</div>


    <!-- here starts the dynamic -->
    <div>&nbsp;</div>
    <div>&nbsp;</div>
    
    
    <div class="row">
        <% for (let i = 0; i < products.length; i++) { %>
        <div class="col-sm-3 col-md-6 col-lg-4">
            <div class="card">
                <div class="card-body text-center">
                    <a href="/app/search_result/single/<%= products[i].PRODUCT_ID %>"><img src="/images/dress3.jpg" class="product-image"></a>
                    <h5 class="card-title"><b><%= products[i].NAME %></b></h5>
                    <p class="card-text small"><%= products[i].TYPE_OF %></p>
                    <p class="tags">Price :<%= products[i].PRICE %></p>
                </div>

            </div>
        </div>
        <% if ((i + 1) % 3 === 0 || (i + 1) === products.length) { %>
    </div>
    <div>&nbsp;</div>
    <div class="row">
        <% } %>
        <% } %>
    </div>
    <!-- Sorting by <div class="row"> -->
        

					</>
				<!--END  <div class="col-lg-9">-->

			</div>
		</div>
	</section>
  
  
	<div>&nbsp;</div>
	<div>&nbsp;</div>
	
   
  
  <!-- ends the dynamic-->
  
  
	<footer class="footer-info pt-5 py-4">
	  <div class="container">
		<div class="small text-center text-muted">
		  <span class="footer-title"></span> <span class="copyright">&copy; </span>
		</div>
  
		<a class="scroll-to-top rounded" href="#page-top">
		  <span class="fa fa-angle-up"><br>TOP</span>
		</a>
  
	  </div>
	</footer>
  
	<script
	type="text/javascript"
	src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/6.4.1/mdb.min.js"
	></script>
  
	<!-- Bootstrap JavaScript -->
	<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
	
  
  
  
	  <style>
		  
  :root{
	--input-padding-x: 1.5rem;
	--input-padding-y: 0.75rem;
  }
  
  
  body,
  html{
	width: 100%;
	height: 100%;
  }
  
  .btn{
	font-family: 'Kanit',sans-serif;
  }
  
  .btn-success{
	background-color: #c0aa83;
	border-color: #c0aa83;
	color: #fff;
  }
  
  .btn-success:hover{
	background-color: #242424;
	border-color: #242424;
	color: #fff;
  }
  
  .masthead2{
  
	background-image: url("../img/backgroundimage.jpg");
	background-position: 50% -26px;
	background-color:#242424;
  
  }
  
  a.social-icon{
	color:#242424;
  }
  
  a.social-icon:hover{
	color:#c0aa83;
  }
  
  .social-icon{
	background-color: #ECE4C3;
	width: 80px;
	height: 80px;
	padding:20px;
	margin: 10px;
  }
  
  .social-icon a{
	background-color: #B98C45;
	width: 50px;
	height: 50px;
	padding:10px 16px;
	margin-right: 6px;
	position: relative;
	display: block;
  
  }
  
  .social-icon a:hover{
	color:#242424;
  
  }
  
  
  .page-section{
	padding: 8rem 0;
  }
  
  .main-menu{
	color: #c0aa83;
	font-family: 'Kanit',sans-serif;
	font-size: 20px;
	font-weight: 900;
  }
  
  a.link-menu{
	text-decoration: none;
	color: #c0aa83;
  }
  
  .footer-info{
	background-color: #000;
  }
  .scroll-to-top{
  position: fixed;
  right: 15px;
  bottom: 15px;
  width: 50px;
  height: 50px;
  text-align: center;
  color:#242424;
  background: #c0aa83;
  line-height: 46px;
} 

.scroll-to-top:focus,.scroll-to-top:hover{
  color:#242424;
}

.scroll-to-top:hover{
  color:#c0aa83;
}

.rounded {
  border-radius: 0.25rem !important;
}

.footer-title{
  color: #fff;
  font-family: 'Kanit',sans-serif;
  font-size: 14px;
  font-weight: 300;
  line-height: 46px;
}

.copyright{
  color:#c0aa83;
  font-family: 'Kanit',sans-serif;
  font-size: 14px;
  font-weight: 300;
}


#mainNav{
  -webkit-box-shadow: 0.05rem 1rem rgba(0, 0, 0, 0.15);
  box-shadow: 0.05rem 1rem rgba(0, 0, 0, 0.15);
  background-color: #fff;
  -webkit-transition: background-color 0.2s ease; 
  transition: background-color 0.2s ease; 
}

#mainNav .navbar-brand {

  font-family: 'Kanit',sans-serif;
  font-weight: 700;

}

#mainNav .navbar-nav .nav-item .nav-link {
  color:#242424;
  font-family: 'Kanit',sans-serif;
  font-size: 0.9rem;
  font-weight: 700;
  padding:0.75rem 0;
}

.navbar-nav{
  display: -webkit-box;
  display: -ms-box;
  display: flex;
  -webkit-box-orient:vertical;
  -webkit-box-direction:normal;
  -ms-flex-direction:column;
  flex-direction:column;
  padding-left: 0;
  margin-bottom: 0;
  list-style: none;
}

.nav-item .nav-link{
  padding-left: 0; 
  padding-right: 0; 
}

#mainNav .navbar-nav .nav-item .nav-link:hover{
  color: #c0aa83 !important;
}

li.nav-item {
  display: inline;
  padding: 10px;
}

.btn-light{
  background-color: #c0aa83;
  border-color: #c0aa83;
  color: #fff;
  font-family: 'Kanit',sans-serif;
  font-size: 16px;
  font-weight: 900;

}

.btn-light:hover{
  background-color: #fff;
  border-color: #c0aa83;
  color: #c0aa83;
  font-family: 'Kanit',sans-serif;
  font-size: 16px;
  font-weight: 900;

}

.btn-dark{
  background-color: #242424;
  border-color: #242424;
  color: #fff;
  font-family: 'Kanit',sans-serif;
  font-size: 16px;
  font-weight: 900;

}

.btn-dark:hover{
  background-color: #fff;
  border-color: #242424;
  color: #242424;
  font-family: 'Kanit',sans-serif;
  font-size: 16px;
  font-weight: 900;

}

.boxed{
  background-color: #c0aa83;
  height: 150px;
  margin-left: 80px;
  margin-right: 80px;
  padding-top: 15px;
  padding-left: 20px;
}


.subscribe-section{
  background-image: url("../img/footer_map.png");
  background-color:#242424;
}

.contact-heading{
  color: #c0aa83;
  font-family: 'Kanit',sans-serif;
  font-size: 30px;
  font-weight: 300;
}

.contact-info{
  color: #fff;
  font-family: 'Kanit',sans-serif;
  font-size: 18px;
}

a.explore-link{
  color: #fff;
  font-family: 'Kanit',sans-serif;
  font-size: 15px;
  text-decoration: none;
}

a.explore-link:hover{
  color: #c0aa83;
  font-family: 'Kanit',sans-serif;
  font-size: 15px;
  text-decoration: none;
}

.logo-text-white{
  color: #fff;
  font-family: 'Kanit',sans-serif;
  font-size: 16px;
}

/*PRODUCT PAGE STYLING*/

.blog-sidebar-title{
  color: #242424;
  font-family: 'Kanit',sans-serif;
  font-size: 25px;
  font-weight: 900;
}

.blog-sidebar-list{
  color: #242424;
  font-family: 'Kanit',sans-serif;
  font-size: 16px;
  font-weight: 900;
}

.blog-sidebar-text{
  color: #242424;
  font-family: 'Kanit',sans-serif;
  font-size: 16px;
  font-weight: 200;
}

.blog-form{
  background-color: #F4F4F4; 
  padding: 50px;
  height: 1000px;
}

.list-icon{

  color: #c0aa83;

}

.tags{
  color: #242424;
  font-family: 'Kanit',sans-serif;
  font-size: 20px;
  font-weight: 200;
}

.tags{
  color: #242424;
  font-family: 'Kanit',sans-serif;
  font-size: 20px;
  font-weight: 200;
}



.product-sidebar-list{
  color: #242424;
}

.product-sidebar-list:hover{
  color: #c0aa83;
}

.card-title{
  color: #c0aa83;
  font-family: 'Kanit',sans-serif;
  font-size: 25px;
  font-weight: 900;
}

.card-text{
  font-family: 'Kanit',sans-serif;
  font-size: 13px;
}

.price-tag{
  color: #c0aa83;
  font-family: 'Kanit',sans-serif;
  font-size: 25px;
  font-weight: 900;
}

.button-text{
  font-family: 'Kanit',sans-serif;
  font-size: 14px;
  font-weight: 900;
}

.product-image{
  width: 200px;
  height: 200px;
}

    </style>
</body>
</html>


body {
  font-family: Arial, sans-serif;
  background-color: #f0f0f0;
  margin: 0;
  padding: 0;
}

.container {
  width:50%;
  margin-top:20px;
  margin-left:650px;
  padding: 20px;
  background-color: #fff;
  border-radius: 5px;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
}


.form-group {
  margin-bottom: 20px;
}

label {
  display: block;
  margin-bottom: 5px;
  font-weight: bold;
}

input[type="text"],
input[type="number"],
input[type="file"] {
  width: 100%;
  padding: 10px;
  border: 1px solid #ccc;
  border-radius: 3px;
  font-size: 16px;
}

.btn {
  background-color: #256eff;
  color: #fff;
  border: none;
  margin-top:20px;
  margin-left:700px;
  padding: 10px 20px;
  border-radius: 3px;
  font-size: 16px;
  cursor: pointer;
  transition: background-color 0.3s ease;
}

.btn:hover {
  background-color: #1e4caf;
}
</style>


<div class="form-group">
  <label for="Gender">Gender:</label>
  <input type="radio" class="rd" name="productGender" value="male" required >Male
  <input type="radio" class="rd" name="productGender" value="female">Female
  <input type="radio" class="rd" name="productGender" value="child">Children
</div>
<div class="form-group">
  <label for="productMaterial">Product Material:</label>
  <input type="text" id="productMaterial" name="productMaterial" value=" <%= product_data[0].MATERIAL%>">
</div>
<div class="form-group">
  <label for="Typeof">Category:</label>
  <input type="text" id="productCategory" name="productCategory" value=" <%= product_data[0].TYPE_OF %>">
</div>


<!--<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
  
</head>

<body class="login_body">
    <div class="card">
     
    <div class="text-center errorM"><%=message%></div>

    <div class="text-center center-div" id="login">

        <div class="container ">
            <div class="title pb-3">
                Update Product 
            </div>
            <form action="/app/UpdateProduct" method="POST" class="multipart/form-data">
            <div class="form-group">
                <label for="productImage">Product Image:</label>
                <input type="file" id="productImage" name="productImage" accept="image/*">
            </div>
                <div class="form-group">
                    <label for="productName">Product Name:</label>
                    <input type="text" id="productName" name="productName" value="<%= product_data[0].NAME %>">
                    </div>
                <div class="form-group">
                    <label for="productPrice">Product Price:</label>
                    <input type="number" id="productPrice" name="productPrice" step="0.01" value="<%= product_data[0].PRICE %>">
                </div>
                <div class="form-group">
                    <label for="productMaterial">Product Material:</label>
                    <input type="text" id="productMaterial" name="productMaterial" value=" <%= product_data[0].MATERIAL%>">
                </div>
                <div class="form-group">
                    <label for="Typeof">Category:</label>
                    <input type="text" id="productCategory" name="productCategory" value=" <%= product_data[0].TYPE_OF %>">
                </div>
                <div class="form-group">
                    <label for="Gender">Gender:</label>
                    <input type="radio" class="rd" name="productGender" value="male" required >Male
                    <input type="radio" class="rd" name="productGender" value="female">Female
                    <input type="radio" class="rd" name="productGender" value="child">Children
                </div>
                <div class="form-group">
                    <label for="size">Size:</label>
                    <input type="number" id="productSize" name="productSize" value="36" step="1" value=" <%= product_data[0].SIZE_OF %>">
                </div>
                <div class="form-group">
                    <label for="size">Quantity:</label>
                    <input type="number" id="productQuantity" name="productQuantity" step="1" value="<%=product_data[0].QUANTITY %>">
                </div>
                <div class="form-group">
                    <label for="Used status">Used Status:</label>
                    <input type="text" id="productUsedStatus" name="productUsedStatus" value=" <%= product_data[0].USED_STATUS %>">
                </div>

            </div>
            <button type="submit" class="btn">Update Product</button>
            
            </form>
            <h2><%=message%></h2>
        </div>
    </div>
        </form>

    </div>
</div>


</div>



 <style>     
  :root {
    font-size: 20px;
    box-sizing: inherit;
  }
  
  *,
  *:before,
  *:after {
    box-sizing: inherit;
  }
  
  p {
    margin: 0;
  }
  
  p:not(:last-child) {
    margin-bottom: 1.5em;
  }
  
  .login_body{
    font: 1em/1.618 Inter, sans-serif;
  
    display: flex;
    align-items: center;
    justify-content: center;
    
    min-height: 100vh;
    padding: 30px;
    
    color: #224;
    background:
    url("/images/clothes.jpg")
      center / cover no-repeat fixed;
  }
  
  .form-control
  {
    width: 400px;
    margin-left: 80px;
    margin-bottom: 20px;
    
  }
  .card {
    max-width: 600px;
    min-height: 200px;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
  
    width: 600px;
    height: 600px;
    padding: 35px;
  
    border: 1px solid rgba(255, 255, 255, .25);
    border-radius: 20px;
    background-color: rgba(255, 255, 255, 0.45);
    box-shadow: 0 0 10px 1px rgba(0, 0, 0, 0.25);
  
    backdrop-filter: blur(15px);
  }
  
  /* Increase the size of the radio buttons */
  .rd {
    transform: scale(1.5); /* Adjust the scale factor as needed */
    margin-right: 10px; /* Add some spacing between the radio buttons */
  }
  
  
  .card-footer {
    font-size: 0.65em;
    color: #446;
  }
  </style>
  </body>
</html>-->

<!--Page view for adding a product in the shop-->
<!--<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    
</head>
<body class="login_body">
    <div class="card">
     
    <div class="text-center errorM"><%=message%></div>

    <div class="text-center center-div" id="login">

        <div class="container ">
            <div class="title pb-3">
                Update Product 
            </div>
            <form action="/app/UpdateProduct" method="POST" enctype="multipart/form-data">
                <div class="form-group">
                    <label for="productImage">Product Image:</label>
                    <input type="file" id="productImage" name='productImage' accept="image/*" class="form-control"/>
                </div>
                <div class="form-group">
                    <input  value="<%= product_data[0].NAME %>" class="form-control" name="productName">
                </div>
                <div class="form-group role">
                    <input type="hidden" id="initialGender" value="<%= product_data[0].GENDER_CATEGORY %>">
                </div>

                <div class="form-group role">
                    <div class="form-check form-check-inline">
                        <input type="radio" class="form-check-input" name="productGender" value="male" id="maleRadio">
                        <label class="form-check-label" for="maleRadio">Male</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input type="radio" class="form-check-input" name="productGender" value="female" id="femaleRadio" >
                        <label class="form-check-label" for="femaleRadio">Female</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input type="radio" class="form-check-input" name="productGender" value="child" id="childRadio">
                        <label class="form-check-label" for="childRadio">Children</label>
                    </div>
                </div>
                <div class="form-group">
                    <select class="form-control" id="category" name="productCategory" required>
                        <option value="<%= product_data[0].TYPE_OF %>" disabled selected><%= product_data[0].TYPE_OF %></option>
                    </select>
                </div>
                <div class="form-group">
                    <input type="number" class="form-control" value="<%= product_data[0].PRICE %>" name="productPrice">
                </div>
                <div class="form-group">
                    <select class="form-control" id="material" name="productMaterial">
                        <option value="<%= product_data[0].MATERIAL%>" disabled selected><%= product_data[0].MATERIAL%></option>
                        <option value="Cotton">Cotton</option>
                        <option value="Silk">Silk</option>
                        <option value="Denim">Denim</option>
                        <option value="Linen">Linen</option>
                        <option value="Wool">Wool</option>
                        <option value="Polyester">Polyester</option>
                        <option value="Velvet">Velvet</option>
                        <option value="Leather">Leather</option>
                        <option value="Chiffon">Chiffon</option>
                        <option value="Satin">Satin</option>
                        <option value="Half Silk">Half Silk</option>
                        <option value="PolyCotton">PolyCotton</option>
                        
                    </select>
                </div>
                <div class="form-group">
                    <input type="number" class="form-control" value="<%= product_data[0].QUANTITY %>" name="productQuantity" >
                </div>
                <div class="form-group">
                    <input class="form-control" value="<%= product_data[0].SIZE_OF %>" name="productSize" >
                </div>
                <div class="form-group">
                    <input class="form-control" value="<%= product_data[0].USED_STATUS%>" name="productUsedStatus" >
                </div>
                <button type="submit" class="btn btn-success rounded-5">Update</button>
                </form>
                <h2><%=message%></h2>
            </div>
        </div>
   
        </div>
    </div>


  </div>

      <style>
        :root {
  font-size: 20px;
  box-sizing: inherit;
}

*,
*:before,
*:after {
  box-sizing: inherit;
}

p {
  margin: 0;
}

p:not(:last-child) {
  margin-bottom: 1.5em;
}

.login_body{
  font: 1em/1.618 Inter, sans-serif;

  display: flex;
  align-items: center;
  justify-content: center;
  
  min-height: 100vh;
  padding: 30px;
  
  color: #224;
  background:
  url("/images/clothes.jpg")
    center / cover no-repeat fixed;
}

.form-control
{
  width: 400px;
  margin-left: 80px;
  margin-bottom: 20px;
  
}
.card {
  max-width: 600px;
  min-height: 200px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;

  width: 600px;
  height: 600px;
  padding: 35px;

  border: 1px solid rgba(255, 255, 255, .25);
  border-radius: 20px;
  background-color: rgba(255, 255, 255, 0.45);
  box-shadow: 0 0 10px 1px rgba(0, 0, 0, 0.25);

  backdrop-filter: blur(15px);
}

/* Increase the size of the radio buttons */
.rd {
  transform: scale(1.5); /* Adjust the scale factor as needed */
  margin-right: 10px; /* Add some spacing between the radio buttons */
}


.card-footer {
  font-size: 0.65em;
  color: #446;
}

   
  


</style>
<script>
    // JavaScript to update the category dropdown based on the selected gender
    const categorySelect = document.getElementById('category');
    const genderRadios = document.querySelectorAll('input[name="productGender"]');
    const initialGender = document.getElementById('initialGender').value;

    for (const radio of genderRadios) {
        radio.addEventListener('change', updateCategoryOptions);
    }
    if (initialGender === 'male') {
        document.getElementById('maleRadio').checked = true;
    } else if (initialGender === 'female') {
        document.getElementById('femaleRadio').checked = true;
    } else if (initialGender === 'child') {
        document.getElementById('childRadio').checked = true;
    }
    function updateCategoryOptions() {
        const selectedGender = document.querySelector('input[name="productGender"]:checked').value;
        categorySelect.innerHTML = ''; // Clear existing options

        // Define category options based on the selected gender
        const categoryOptions = {
            male: ['Shirt', "Men's Pants", 'Panjabi','Jacket','Coaty','Lungi'],
            female: ['Sharee', 'Salwar Kamiz', 'Tops',"Women's Pants",'Skirt','Scarf'],
            child: ["Kids' Frock", "Kids' Shirt", "Kids' Pants","Kids' Salwar Kamiz","Kids' Panjabi"],
        };

        // Populate the category dropdown with options
        for (const category of categoryOptions[selectedGender]) {
            const option = document.createElement('option');
            option.value = category;
            option.textContent = category;
            categorySelect.appendChild(option);
        }
    }

    // Initialize the category options based on the default selected gender
    updateCategoryOptions();
</script>
</body>
</html>-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Registration</title>
   
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    
    <style>
        body {
            background-color: #f8f9fa;
        }

        .center-div {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .border {
            border: 1px solid #e2e2e2;
            border-radius: 10px;
        }

        .title {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 20px;
            color: #333;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-control {
            border-radius: 5px;
            padding: 12px;
            font-size: 14px;
        }

        .role {
            margin-top: 10px;
        }

        .btn-success {
            background-color: #28a745;
            border: none;
            border-radius: 5px;
            padding: 10px 20px;
            font-size: 16px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="text-center py-1 success"><%=message%></div>

    <div class="text-center center-div" id="login">
        <div class="container w-25 border py-5">
            <div class="title pb-3">
                Product Information
            </div>
            <form action="/app/addProductinSeller" method="POST" class="multipart/form-data">
                <div class="form-group">
                    <label for="productImage">Product Image:</label>
                    <input type="file" id="productImage" name="productImage" accept="image/*" class="form-control">
                </div>
                <div class="form-group">
                    <input placeholder="Product Name" class="form-control" name="name">
                </div>
                <div class="form-group">
                    <input class="form-control" placeholder="Category" name="category">
                </div>
                <div class="form-group role">
                    <div class="form-check form-check-inline">
                        <input type="radio" class="form-check-input" name="gender" value="male" id="maleRadio">
                        <label class="form-check-label" for="maleRadio">Male</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input type="radio" class="form-check-input" name="gender" value="female" id="femaleRadio">
                        <label class="form-check-label" for="femaleRadio">Female</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input type="radio" class="form-check-input" name="gender" value="child" id="childRadio">
                        <label class="form-check-label" for="childRadio">Children</label>
                    </div>
                </div>
                <div class="form-group">
                    <input type="number" class="form-control" placeholder="Price" name="price">
                </div>
                <div class="form-group">
                    <input class="form-control" placeholder="Material" name="material">
                </div>
                <div class="form-group">
                    <input type="number" class="form-control" placeholder="Quantity" name="quantity">
                </div>
                <div class="form-group">
                    <input class="form-control" placeholder="Size" name="size">
                </div>
                <div class="form-group">
                    <input class="form-control" placeholder="Used Status" name="Used_status">
                </div>
                <button type="submit" class="btn btn-success rounded-5">Add</button>
            </form>
        </div>
    </div>
</body>
</html>

const express=require('express');
const router=express.Router();
const DB_user = require('../Database/product')
const DB_user1 = require('../Database/Basic_user')

router.get('/',async(req,res)=>{
    res.render('addSellerProduct.ejs',{error:"",message:""});
})

router.post('/', async(req,res)=>{
    let prod = req.body;
    let userid=req.user.id;
    let seller=await DB_user1.getSellerByUser(req.user.id);
    let sellerId=seller[0].SELLER_ID;
    console.log(sellerId);
    await DB_user.addSellerProduct(prod.name, prod.gender, prod.category, prod.material, prod.price, prod.quantity, prod.productImage, prod.size,prod.Used_status, sellerId)
    res.render('addSellerProduct.ejs',{error:"",message:"New Product Added!"});
});


module.exports=router;

results = await DB_product.getProductbyName(req.query.product_search_seller,id,'user');
//console.log(results);
if(results.length==0){
    results=await DB_product.getProductbyCategory(req.query.product_search_seller,id,'user');
    if(results.length==0){
        const userData = await DB_user.readID(id, 'user');
        res.render('seller.ejs',{userData: userData,message:"No such product/category Found"})
    }
    else{
        res.render('search_seller.ejs',{product_data:results}); 
    }
}
else{
    res.render('search_seller.ejs',{product_data:results});
}
} catch (error) {
console.error(error);
}


console.log(results);<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>My Cart</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA==" crossorigin="anonymous" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.11.0/mdb.min.css">

    <!-- Font Awesome -->
<link
href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
rel="stylesheet"
/>
<!-- Google Fonts -->
<link
href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"
rel="stylesheet"
/>
<!-- MDB -->
<link
href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/6.4.1/mdb.min.css"
rel="stylesheet"
/>
</head>

<body style="background-color: #d2c9ff;">
  <%- include('userNav.ejs') %>
  <section class="h-100 h-custom" >
    <div class="container py-5 h-100">
      <div class="row d-flex justify-content-center align-items-center h-100">
        <div class="col-12">
          <div class="card card-registration card-registration-2" style="border-radius: 15px;">
            <div class="card-body p-0">
              <div class="row g-0">
                <div class="col-lg-8">
                  <div class="p-5">
                    <div class="d-flex justify-content-between align-items-center mb-5">
                      <h1 class="fw-bold mb-0 text-black">My Cart</h1>
                      <h6 class="mb-0 text-muted"><%=products.length %> items</h6>
                    </div>


                    <!-- Loop through the products and generate dynamic HTML -->
                    <% for (let j=0;j<products.length;j++) { %>
                    <hr class="my-4">
                    <div class="row mb-4 d-flex justify-content-between align-items-center">
                      <div class="col-md-1 col-lg-1 col-xl-1">
                        <input type="checkbox" id="checkbox_<%= j %>" <% if (products[j].STATUS === 'check') { %>checked<% } %>>
                      </div>
                      <div class="col-md-2 col-lg-2 col-xl-2">
                        <img src="/<%= products[j].IMAGE%>" class="img-fluid rounded-3" alt="<%= products[j].NAME %>">
                      </div>
                      <div class="col-md-3 col-lg-3 col-xl-3">
                        <h6 class="text-muted"><%=products[j].TYPE_OF %></h6>
                        <h6 class="text-black mb-0"><%= products[j].NAME %></h6>
                      </div>
                      <div class="col-md-3 col-lg-3 col-xl-2 d-flex">
                        <button class="btn btn-link px-2" onclick="decrementQuantity(this)">
                          <i class="fas fa-minus"></i>
                        </button>
                        <input id="quantity_<%= j %>" min="1" max="<%= products[j].QUANTITY%>" name="quantity" value="<%=products[j].AMOUNT%>" type="number" class="form-control form-control-sm" />
                        <button class="btn btn-link px-2" id="inc_amount" onclick="incrementQuantity(this)">
                          <i class="fas fa-plus"></i>
                        </button>
                      </div>
                      <div class="col-md-3 col-lg-2 col-xl-2 offset-lg-1">
                        <h6 class="mb-0" id="price_<%= j %>"><%= products[j].PRICE * products[j].AMOUNT %></h6>
                      </div>
                      <div class="col-md-1 col-lg-1 col-xl-1 text-end">
                        <!-- <a href="/app/cart/cancelProduct" class="text-muted"><i class="fas fa-times"></i></a> -->
                        <button class="cancel-product-btn" id="cancel" data-product-id="<%= products[j].PRODUCT_ID %>"><i class="fas fa-times"></i></button>
                      </div>
                    </div>
                    <% } %>





                    <hr class="my-4">

                    
                  </div>
                </div>
                <div class="col-lg-4 bg-grey">
                  <div class="p-5">
                    <h3 class="fw-bold mb-5 mt-2 pt-1">Summary</h3>
                    <hr class="my-4">
                    <div class="d-flex justify-content-between mb-4">
                      <h5 class="text-uppercase">Total price</h5>
                      <h5 id="totalPrice">€ 0.00</h5>
                    </div>
                    <hr>

                    <!-- <div class="d-flex justify-content-between mb-4">
                      <h5 class="text-uppercase">items 3</h5>
                      <h5>€ 132.00</h5>
                    </div> -->

                    <!-- <h5 class="text-uppercase mb-3">Shipping</h5>

                    <div class="mb-4 pb-2">
                      <select class="select">
                        <option value="1">Standard-Delivery- €5.00</option>
                        <option value="2">Two</option>
                        <option value="3">Three</option>
                        <option value="4">Four</option>
                      </select>
                    </div> -->

                    <h5 class="text-uppercase mb-3">Address</h5>
                    <h6 class="text-muted"><%=user[0].ADDRESS %></h6>
                    <hr>

                    <h5 class="text-uppercase mb-3">Phone</h5>
                    <h6 class="text-muted"><%=user[0].PHONE %></h6>
                    <hr>

                    <div class="mb-5">
                      <form action="/app/myprofile/update" method="GET">
                        <button class="btn btn-light center-div">Update Address</button>
                      </form>
                    </div>

                    <hr class="my-4">

                    

                    <button type="button" id="confirmOrderBtn" class="btn btn-dark btn-block btn-lg" data-mdb-ripple-color="dark">Confirm Order</button>

                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <script
  type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/6.4.1/mdb.min.js"
></script>
  <script>


// Inside your script tag
document.addEventListener("DOMContentLoaded", function () {
  const productArr = decodeHtml('<%= JSON.stringify(products) %>');
  const checkboxes = document.querySelectorAll('input[type="checkbox"]');
  checkboxes.forEach(function (checkbox, index) {
    checkbox.addEventListener("change", async function () {
      
      const productId = checkbox.id.split('_')[1];
      const newStatus = checkbox.checked ? 'check' : 'uncheck';
      
      updateStatus(productId,newStatus);
      // Calculate the new total price
      updateTotalPrice();
    });
  });

  // Initial calculation of the total price
  updateTotalPrice();

  function updateTotalPrice() {
    let totalPrice = 0;

    checkboxes.forEach(function (checkbox, index) {
      if (checkbox.checked) {
        // Get the corresponding product's price and amount
        const productId = checkbox.id.split('_')[1];
        const productPrice = parseFloat(productArr[productId].PRICE);
        const quantity = parseInt(document.getElementById(`quantity_${productId}`).value);
        totalPrice += productPrice * quantity;
      }
    });

    // Update the total price display
    const totalPriceElement = document.querySelector("#totalPrice");
    if (totalPriceElement) {
      totalPriceElement.textContent = totalPrice.toFixed(2);
    }
  }

  async function updateStatus(productId, status)
  {
    const dataToSend = {
    Product: productArr[productId].PRODUCT_ID,
    status: status
  };

  await fetch('/app/cart/updateStatus', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify(dataToSend),
    });
  }




  
    const confirmOrderButton = document.getElementById("confirmOrderBtn");

    confirmOrderButton.addEventListener("click", async function () {
      // Collect information about checked products
      const checkedProducts = [];
      const checkboxes = document.querySelectorAll('input[type="checkbox"]');
      checkboxes.forEach(function (checkbox, index) {
        if (checkbox.checked) {
          const productId = checkbox.id.split('_')[1];
          const ID = parseFloat(productArr[productId].PRODUCT_ID);
          const quantity = parseFloat(productArr[productId].QUANTITY);
          const amountElement = document.getElementById(`quantity_${productId}`);
          const amount = parseInt(amountElement.value);
          checkedProducts.push({ ID, quantity, amount });
        }
      });

      console.log(checkedProducts);

      // Calculate the total price
      const totalPriceElement = document.getElementById("totalPrice");
      const totalPrice = parseFloat(totalPriceElement.textContent);
      const cid = '<%=cartID%>'


      const dataToSend = {
  checkedProducts: checkedProducts,
  totalPrice: totalPrice,
  cid: cid
};
      await fetch('/app/confirmOrder/', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify(dataToSend),
    });

   
    });

    
    const cancelButtons = document.querySelectorAll('.cancel-product-btn');
  cancelButtons.forEach(function (cancelButton) {
    cancelButton.addEventListener("click", async function () {

      const cancelledProducts = [];
      const productId = cancelButton.getAttribute('data-product-id');
      
      cancelledProducts.push(productId);

      console.log("Cancelled Products:", cancelledProducts);

      const cid = '<%=cartID%>'


      const dataToSend = {
  cancelledProducts: cancelledProducts,
  cid: cid
};
      location.reload();
      await fetch('/app/cart/cancelProduct', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify(dataToSend),
    })
    .then(response => {
  if (!response.ok) {
    throw new Error('Network response was not ok');
  }
  return response.json();
})
.then(data => {
  console.log(data); // Handle the response data if needed
  return fetch('/app/cart', {
    method: 'GET',
  });
})
.catch(error => {
  console.error('Error:', error);
});

    console.log("hocche ki kichu?")
    



    });
  });

});



function decrementQuantity(button) {
  const input = button.parentNode.querySelector('input[type=number]');
  if (input.value > 0) {
    input.stepDown();
    updatePrice(input.id.split('_')[1]);
  }
}

function incrementQuantity(button) {
  const input = button.parentNode.querySelector('input[type=number]');
  input.stepUp();
  updatePrice(input.id.split('_')[1]);
}
function decodeHtml(html) {
  var txt = document.createElement("textarea");
  txt.innerHTML = html;
  return JSON.parse(txt.value);
}

function updatePrice(productId) {
  console.log(productId);
  const productArr = decodeHtml('<%= JSON.stringify(products) %>');

  console.log(productArr);
  const quantityInput = document.getElementById(`quantity_${productId}`);
  const priceElement = document.getElementById(`price_${productId}`);
  const productPrice = parseFloat(productArr[productId].PRICE);
  console.log(productPrice);

  const quantity = parseInt(quantityInput.value);
  const totalPrice = productPrice * quantity;
  priceElement.textContent = totalPrice.toFixed(2);

  updateTotalPrice();

  
   // Display the updated price with two decimal places
}


function updateTotalPrice() {
    let totalPrice = 0;
    const productArr = decodeHtml('<%= JSON.stringify(products) %>');
    const checkboxes = document.querySelectorAll('input[type="checkbox"]');
    checkboxes.forEach(function (checkbox, index) {
      if (checkbox.checked) {
        // Get the corresponding product's price and amount
        const productId = checkbox.id.split('_')[1];
        const productPrice = parseFloat(productArr[productId].PRICE);
        const quantity = parseInt(document.getElementById(`quantity_${productId}`).value);
        totalPrice += productPrice * quantity;
      }
    });

    // Update the total price display
    const totalPriceElement = document.querySelector("#totalPrice");
    if (totalPriceElement) {
      totalPriceElement.textContent = totalPrice.toFixed(2);
    }
    console.log("updated");
  }


</script>


    <style>


@media (min-width: 1025px) {
.h-custom {
height: 100vh !important;
}
}

.card-registration .select-input.form-control[readonly]:not([disabled]) {
font-size: 1rem;
line-height: 2.15;
padding-left: .75em;
padding-right: .75em;
}

.card-registration .select-arrow {
top: 13px;
}

.bg-grey {
background-color: #eae8e8;
}

@media (min-width: 992px) {
.card-registration-2 .bg-grey {
border-top-right-radius: 16px;
border-bottom-right-radius: 16px;
}
}

#cancel {
  background-color: #b6b6bd; /* Change this to your desired background color */
  color: rgb(26, 24, 24); /* Text color */
  border: none; /* Remove the border */
  border-radius: 20px; /* Rounded corners */
  padding: 7px 15px; /* Adjust padding as needed */
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); /* Add a subtle shadow for the lifted effect */
  cursor: pointer; /* Change cursor on hover */
}

#cancel:hover {
  background-color: #bddbd2; /* Change this to the hover background color */
}

@media (max-width: 991px) {
.card-registration-2 .bg-grey {
border-bottom-left-radius: 16px;
border-bottom-right-radius: 16px;
}
}
        

    </style>
  </body>
</html>